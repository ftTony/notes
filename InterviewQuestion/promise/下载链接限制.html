<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>同时下载的链接数量不可以超过 3 个</title>
</head>
<body>
    <script>
        var urls = [
            'https://www.kkkk1000.com/images/getImgData/getImgDatadata.jpg', 
            'https://www.kkkk1000.com/images/getImgData/gray.gif', 
            'https://www.kkkk1000.com/images/getImgData/Particle.gif', 
            'https://www.kkkk1000.com/images/getImgData/arithmetic.png', 
            'https://www.kkkk1000.com/images/getImgData/arithmetic2.gif', 
            'https://www.kkkk1000.com/images/getImgData/getImgDataError.jpg', 
            'https://www.kkkk1000.com/images/getImgData/arithmetic.gif', 
            'https://www.kkkk1000.com/images/wxQrCode2.png'
        ];
        function loadImg(url){
            return new Promise((resolve,reject)=>{
                const img = new Image();
                img.onload = function(){
                    console.log('一张图片加载完成功！');
                    resolve();
                };
                img.onerror = reject;
                img.src = url;
                document.documentElement.appendChild(img);
            });
        }

        var count = 0;
        
        function bao(){
            count++;
            console.log('并发数：',count);
            // 条件判断，urls长度大于0继续，小于等于零说明图片加载完成
            if(urls.length>0 && count <=3){
                // shift从数组中取出连接
                loadImg(urls.shift()).then(()=>{
                    // 计数器速减
                    count--;
                    // 递归调用
                }).then(bao);
            }
        }

        function async1(){
            for(var i=0;i<3;i++){
                bao();
            }
        }
        async1();
</script>
</body>
</html>